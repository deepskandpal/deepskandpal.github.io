<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>404EngineerNotFound</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.31/dist/flexsearch.bundle.js></script><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script></head><body>\<header><nav><div class=logo><a href=/>404EngineerNotFound</a></div><ul class=main-nav><li class="nav-item has-dropdown"><a href=#>Writings <i class="fas fa-caret-down fa-xs"></i></a><ul class=dropdown-menu><li class=dropdown-item><a href=/stories/>Stories</a></li><li class=dropdown-item><a href=/thoughts/>Thoughts</a></li><li class=dropdown-item><a href=/fitness-log/>Fitness Log</a></li></ul></li><li class="nav-item has-dropdown"><a href=#>Tech Lab <i class="fas fa-caret-down fa-xs"></i></a><ul class=dropdown-menu><li class=dropdown-item><a href=/papershelf/>Papershelf</a></li><li class=dropdown-item><a href=/creations/>Creations</a></li><li class=dropdown-item><a href=/dsa-log/>DSA Log</a></li><li class=dropdown-item><a href=/tech-writings/>Technical Writings</a></li></ul></li><li class=nav-item><a href=/bookshelf/>Bookshelf</a></li><li class=nav-item><a href=/about/>About</a></li></ul><div class=search-container><input type=search id=search-input placeholder=Search...>
<i class="fa fa-search"></i></div></nav><div id=search-results-container><ul id=search-results></ul></div></header><main><div class=single-content-wrapper><aside class=article-sidebar><nav><h4>On this page</h4><nav id=TableOfContents></nav></nav></aside><article class=dsa-single><h1></h1><div class=dsa-meta><p><strong>Difficulty:</strong> <span class=difficulty->N/A</span> |
<strong>Solved:</strong> January 1, 0001</p></div><div class=dsa-content><p>[[Binary trees and Binary search trees]]</p><h1 id=problem>Problem</h1><p>Given a binary tree validate that its a binary search tree</p><p>A <strong>valid BST</strong> is defined as follows:</p><ul><li>The left subtree of a node contains only nodes with keys <strong>strictly less than</strong> the node&rsquo;s key.</li><li>The right subtree of a node contains only nodes with keys <strong>strictly greater than</strong> the node&rsquo;s key.</li><li>Both the left and right subtrees must also be binary search trees.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>. 2
</span></span><span style=display:flex><span> /. \
</span></span><span style=display:flex><span>1.  3
</span></span><span style=display:flex><span>   
</span></span><span style=display:flex><span>Valid tree
</span></span></code></pre></div><h1 id=brain-storming>Brain storming</h1><p>Initial idea is node.left.data &lt;= node.data and node.data &lt;= node.right.data. a simple check across the traversal would ideally work if at each level we just do this check , but here in lies the key problem.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>.     10
</span></span><span style=display:flex><span>     /  \
</span></span><span style=display:flex><span>    5    20
</span></span><span style=display:flex><span>        /
</span></span><span style=display:flex><span>       6
</span></span></code></pre></div><p>In the above tree the local checks will validate for all the nodes for eg at root it will check and give true for <code>node.left.data(5) &lt;= node.data(10) &lt;= node.right.data(20)</code> and then at the next level also give a true for <code>node.left(6) &lt;= node.data(20)</code> but globally this check is failing as 6 is &lt; 10 but it is on the right side of the tree</p><p>This means our rule is not just local. The BST property is <strong>global</strong>. A more accurate way to say it is:</p><ul><li>Everything in a node&rsquo;s left subtree must be &lt;= node.data.</li><li>Everything in a node&rsquo;s right subtree must be >= node.data.</li></ul><p>This gives us a new idea. When our function is at a specific node, it&rsquo;s not enough to know about its immediate parent. It needs to know about the constraints placed on it by all of its ancestors.</p><p>This is the core insight! As we traverse down the tree, we carry with us a <strong>valid range</strong> (a lower_bound and an upper_bound) that every node in the current subtree must obey.</p><p>A key takeaway learned from [[Binary Tree is height balanced?]] is that an empty node is a valid balanced binary tree and a valid binary search tree</p><p>so the base case of node being <code>None</code> will be <code>True</code></p><p>the recurse helper be <code>is_bst_helper(node, lower_bound, upper_bound)</code></p><ol><li>The algorithm will start we will first check for the current node (<code>pre order traversal root , left , right</code>)</li><li>check <code>if lower_bound &lt;= node.data &lt;= upper_bound</code>. if it passes this then the node.data becomes the upper bound for the left tree and the lower bound for the right tree</li><li><code>is_left_bst = is_bst_helper(node.left, lower_bound, node.data)</code> <code>is_right_bst = is_bst_helper(node.right, node.data, upper_bound)</code></li><li>then return the union of left and right <code>return is_left_bst and _is_right_bst</code></li></ol><p>for initialisation we will us <code>float('inf') and -float('inf')</code></p><p>below is the python implementation</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TreeNode</span>: 
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self, val<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>, left<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>, right<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>): 
</span></span><span style=display:flex><span>	self<span style=color:#f92672>.</span>val <span style=color:#f92672>=</span> val 
</span></span><span style=display:flex><span>	self<span style=color:#f92672>.</span>left <span style=color:#f92672>=</span> left 
</span></span><span style=display:flex><span>	self<span style=color:#f92672>.</span>right <span style=color:#f92672>=</span> right
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>is_bst_helper</span>(node:TreeNode, min_bound <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>float(<span style=color:#e6db74>&#39;inf&#39;</span>), max_bound<span style=color:#f92672>=</span> float(<span style=color:#e6db74>&#39;inf&#39;</span>)):
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> node <span style=color:#f92672>is</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> min_bound <span style=color:#f92672>&lt;=</span> node<span style=color:#f92672>.</span>data <span style=color:#f92672>&lt;=</span> max_bound:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>		is_left_bst <span style=color:#f92672>=</span> is_bst_helper(node<span style=color:#f92672>.</span>left, min_bound, node<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>		is_right_bst <span style=color:#f92672>=</span> is_bst_helper(node<span style=color:#f92672>.</span>right, node<span style=color:#f92672>.</span>data, max_bound)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> is_left_bst <span style=color:#f92672>and</span> is_right_bst
</span></span><span style=display:flex><span>	
</span></span></code></pre></div></div></article></div></main><footer><p>&copy; 2025 Deepanshu Kandpal</p></footer><a id=scrollTopBtn title="Go to top"><i class="fa-solid fa-arrow-up"></i></a>
<script src=/js/search.js></script><script>var mybutton=document.getElementById("scrollTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.classList.add("show"):mybutton.classList.remove("show")}mybutton.onclick=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script>document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll("code.language-mermaid");e.forEach(function(e,t){const n=document.createElement("div");n.className="mermaid",n.textContent=e.textContent,n.id="mermaid-"+t,e.parentNode.parentNode.replaceChild(n,e.parentNode)}),mermaid.initialize({startOnLoad:!0,theme:"default",themeVariables:{primaryColor:"#4a90e2",primaryTextColor:"#333",primaryBorderColor:"#4a90e2",lineColor:"#333"}}),mermaid.init()})</script></body></html>