<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>404EngineerNotFound</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.31/dist/flexsearch.bundle.js></script><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script></head><body>\<header><nav><div class=logo><a href=/>404EngineerNotFound</a></div><ul class=main-nav><li class="nav-item has-dropdown"><a href=#>Writings <i class="fas fa-caret-down fa-xs"></i></a><ul class=dropdown-menu><li class=dropdown-item><a href=/stories/>Stories</a></li><li class=dropdown-item><a href=/thoughts/>Thoughts</a></li><li class=dropdown-item><a href=/fitness-log/>Fitness Log</a></li></ul></li><li class="nav-item has-dropdown"><a href=#>Tech Lab <i class="fas fa-caret-down fa-xs"></i></a><ul class=dropdown-menu><li class=dropdown-item><a href=/papershelf/>Papershelf</a></li><li class=dropdown-item><a href=/creations/>Creations</a></li><li class=dropdown-item><a href=/dsa-log/>DSA Log</a></li><li class=dropdown-item><a href=/tech-writings/>Technical Writings</a></li></ul></li><li class=nav-item><a href=/bookshelf/>Bookshelf</a></li><li class=nav-item><a href=/about/>About</a></li></ul><div class=search-container><input type=search id=search-input placeholder=Search...>
<i class="fa fa-search"></i></div></nav><div id=search-results-container><ul id=search-results></ul></div></header><main><div class=single-content-wrapper><aside class=article-sidebar><nav><h4>On this page</h4><nav id=TableOfContents><ul><li><a href=#brainstorming>Brainstorming</a><ul><li><a href=#advanced-2-pointer-approach>Advanced 2 Pointer approach</a></li></ul></li></ul></nav></nav></aside><article class=dsa-single><h1></h1><div class=dsa-meta><p><strong>Difficulty:</strong> <span class=difficulty->N/A</span> |
<strong>Solved:</strong> January 1, 0001</p></div><div class=dsa-content><p>[[Dynamic Programming Primer]]</p><p>You are given an array of non-negative integers representing an elevation map where the width of each bar is 1. Your job is to compute how much water it can trap after raining.
![[Pasted image 20251013180719.png]]</p><p><strong>Input:</strong> height = [0,1,0,2,1,0,1,3,2,1,2,1]
<strong>Output:</strong> 6
<strong>Explanation:</strong> The above elevation map (black section) is represented by array [0,1,0,2,1,0,1,3,2,1,2,1]. In this case, 6 units of rain water (blue section) are being trapped.</p><h2 id=brainstorming>Brainstorming</h2><p>So the core idea is for each bar at index i what is the amount of water it can hold ? The idea here is the max water at that index is determined by the height of the walls that surround that index , the water level is then determined by the minimum of the left and the right wall height , but the true amount of water that can be held is - the height of the wall at index i .</p><p>So to put all these together</p><ol><li>We need to find a way to find the max_height left of the index including the index</li><li>max height right of the index including the index</li><li>water level = min(max_left, max_right)</li><li>amount_at_i = water_level - height at i</li></ol><p>The only problem is for each index we might do the same calculations over and over again , We can use DP here to avoid recomputation</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>height <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>n <span style=color:#f92672>=</span> len(height)
</span></span><span style=display:flex><span>max_left_heights <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>]<span style=color:#f92672>*</span> n <span style=color:#75715e># to store all the max left heights up untill the index</span>
</span></span><span style=display:flex><span><span style=color:#75715e># so it would look like for height[0] the max left height is 0 </span>
</span></span><span style=display:flex><span><span style=color:#75715e># for height[1] the max left height is max(height[1], max_left_heights[0])</span>
</span></span><span style=display:flex><span><span style=color:#75715e># lets set the base case for max height</span>
</span></span><span style=display:flex><span>max_left_heights[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> height[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span><span style=color:#75715e># now we will iterate over the height from the first index</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>1</span>,len(height)):
</span></span><span style=display:flex><span>	max_left_height[i] <span style=color:#f92672>=</span> max(height[i], max_left_height[i<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># we can do the same for right heights, but this time we will go in the reverse order</span>
</span></span><span style=display:flex><span>max_right_heights <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> n
</span></span><span style=display:flex><span><span style=color:#75715e># here the base case will be the last height in heights</span>
</span></span><span style=display:flex><span>max_right_heights[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> height[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># now we will iterate over the height from the second last index</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(len(height) <span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>	max_right_heights[i] <span style=color:#f92672>=</span> max(height[i], max_right_heights[i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>])
</span></span></code></pre></div><p>We will combine this in a 3rd main for loop where we compute the whole water level logic</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span>water_container <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(len(height)):
</span></span><span style=display:flex><span>	water_level <span style=color:#f92672>=</span> min(max_left_heights[i], max_right_heights[i])
</span></span><span style=display:flex><span>	amount_of_water <span style=color:#f92672>=</span> abs(water_level <span style=color:#f92672>-</span> height[i])
</span></span><span style=display:flex><span>	water_container<span style=color:#f92672>.</span>append(amount_of_water)
</span></span></code></pre></div><h3 id=advanced-2-pointer-approach>Advanced 2 Pointer approach</h3></div></article></div></main><footer><p>&copy; 2025 Deepanshu Kandpal</p></footer><a id=scrollTopBtn title="Go to top"><i class="fa-solid fa-arrow-up"></i></a>
<script src=/js/search.js></script><script>var mybutton=document.getElementById("scrollTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.classList.add("show"):mybutton.classList.remove("show")}mybutton.onclick=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script>document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll("code.language-mermaid");e.forEach(function(e,t){const n=document.createElement("div");n.className="mermaid",n.textContent=e.textContent,n.id="mermaid-"+t,e.parentNode.parentNode.replaceChild(n,e.parentNode)}),mermaid.initialize({startOnLoad:!0,theme:"default",themeVariables:{primaryColor:"#4a90e2",primaryTextColor:"#333",primaryBorderColor:"#4a90e2",lineColor:"#333"}}),mermaid.init()})</script></body></html>