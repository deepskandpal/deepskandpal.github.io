<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>404EngineerNotFound</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.31/dist/flexsearch.bundle.js></script><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script></head><body>\<header><nav><div class=logo><a href=/>404EngineerNotFound</a></div><ul class=main-nav><li class="nav-item has-dropdown"><a href=#>Writings <i class="fas fa-caret-down fa-xs"></i></a><ul class=dropdown-menu><li class=dropdown-item><a href=/stories/>Stories</a></li><li class=dropdown-item><a href=/thoughts/>Thoughts</a></li><li class=dropdown-item><a href=/fitness-log/>Fitness Log</a></li></ul></li><li class="nav-item has-dropdown"><a href=#>Tech Lab <i class="fas fa-caret-down fa-xs"></i></a><ul class=dropdown-menu><li class=dropdown-item><a href=/papershelf/>Papershelf</a></li><li class=dropdown-item><a href=/creations/>Creations</a></li><li class=dropdown-item><a href=/dsa-log/>DSA Log</a></li><li class=dropdown-item><a href=/tech-writings/>Technical Writings</a></li></ul></li><li class=nav-item><a href=/bookshelf/>Bookshelf</a></li><li class=nav-item><a href=/about/>About</a></li></ul><div class=search-container><input type=search id=search-input placeholder=Search...>
<i class="fa fa-search"></i></div></nav><div id=search-results-container><ul id=search-results></ul></div></header><main><div class=single-content-wrapper><aside class=article-sidebar><nav><h4>On this page</h4><nav id=TableOfContents><ul><li><a href=#tail-recursion>Tail recursion</a></li></ul></nav></nav></aside><article class=dsa-single><h1></h1><div class=dsa-meta><p><strong>Difficulty:</strong> <span class=difficulty->N/A</span> |
<strong>Solved:</strong> January 1, 0001</p></div><div class=dsa-content><p>[[Binary trees and Binary search trees]]</p><h1 id=problem>Problem</h1><p>Same problem as [[LCA in a binary tree]] , but this time you are <em>guaranteed</em> that the input tree is a valid Binary Search Tree with distinct keys.</p><h1 id=brainstorming>Brainstorming</h1><p>The added advantage we have now is that the tree is guaranteed to be a binary search tree. A binary search tree has a very significant property</p><p><code>node.left.data &lt;= node.data &lt;= node.right.data</code></p><p>so in this case we can look at <code>p</code> and <code>q</code> and decide using this property where to look for our LCA.</p><p>in the standard problem the idea is to go all the way to the bottom and try to find a solution from there. in this case we can avoid that , lets take an example to pen out the algorithm</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>	20
</span></span><span style=display:flex><span>   /  \
</span></span><span style=display:flex><span> 10   30
</span></span><span style=display:flex><span>/ \   / \
</span></span><span style=display:flex><span>5 15 25 35
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>p = 5
</span></span><span style=display:flex><span>q = 15 
</span></span></code></pre></div><p>lets take this example and try to see how it goes</p><ol><li>we start at 20 we check if 5 is less than 20 yes , it means <code>p</code> is definitely in the left side of the tree</li><li>we check for 15 yes even that is less that means its guaranteed our LCA is in the left side of the tree we go left</li><li>we check 10 is 5 less than 10 yes ! so <code>p</code> is in the left side of the tree</li><li>we check 15 is that less than 10 no !! it means means <code>q</code> is on the right side of the tree</li><li>is <code>node.left.data = 5</code> and <code>node.right.data = 10</code> if yes then the current node is LCA return it (this can be a base case)</li></ol><p>lets try with <code>p =15 and q = 25</code> (<code>p and q</code> in different subtrees)</p><ol><li>we start and find p is less than 20 and q is greater than 20 it means by default of the property of the bst the lca is 20</li></ol><p>so essentially 3 cases come up that we need to check</p><ul><li>case 1: both <code>p</code> and <code>q</code> are smaller than <code>node.data</code> it means the lca is definitely on the left subtree hence traverse left</li><li>case 2: both p and q are greater than node.data it means the lca is definitely on the right subtree hence traverse right</li><li>case 3 : if <code>p</code> is smaller than <code>node.data</code> and <code>q</code> is greater than node.data it means by the property of BST node is the LCA</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TreeNode</span>:
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self, val<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>, left<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>, right<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>):
</span></span><span style=display:flex><span>		self<span style=color:#f92672>.</span>val <span style=color:#f92672>=</span> val
</span></span><span style=display:flex><span>		self<span style=color:#f92672>.</span>left <span style=color:#f92672>=</span> left
</span></span><span style=display:flex><span>		self<span style=color:#f92672>.</span>right <span style=color:#f92672>=</span> right
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>lca_in_bst</span>(node:TreeNode, p, q):
</span></span><span style=display:flex><span>	<span style=color:#75715e># base case 1 end of tree </span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> node <span style=color:#f92672>is</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> node
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> node<span style=color:#f92672>.</span>data <span style=color:#f92672>&gt;</span> p <span style=color:#f92672>and</span> node<span style=color:#f92672>.</span>data <span style=color:#f92672>&gt;</span> q:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> lca_in_bst(node<span style=color:#f92672>.</span>left, p, q)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>elif</span> node<span style=color:#f92672>.</span>data <span style=color:#f92672>&lt;</span> p <span style=color:#f92672>and</span> node<span style=color:#f92672>.</span>data <span style=color:#f92672>&lt;</span> q:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> lca_in_bst(node<span style=color:#f92672>.</span>right, p, q)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>else</span> : <span style=color:#75715e># # base case 2 	if (node.data &gt; p or node.data &lt; q) or (node.data &gt; q or node.data &lt; p):</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># If neither of the above is true, it means we have a split,</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># or the current node is one of p or q.</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># Therefore, this currentNode is the LCA.</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> node 
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>	
</span></span></code></pre></div><h2 id=tail-recursion>Tail recursion</h2><p>Recursion needs to maintain a call stack that can be as big as the height of the tree hence any recursive based tree solution as a space complexity of O(h)</p><p>we can use pointer approach and reduce this significantly</p><p>the key idea is case 1 and case 2 , if we hit any of these we know by default where we have to look (left sub tree or right subtree) hence we don&rsquo;t really need to use tree traversals</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TreeNode</span>:
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self, val<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>, left<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>, right<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>):
</span></span><span style=display:flex><span>		self<span style=color:#f92672>.</span>val <span style=color:#f92672>=</span> val
</span></span><span style=display:flex><span>		self<span style=color:#f92672>.</span>left <span style=color:#f92672>=</span> left
</span></span><span style=display:flex><span>		self<span style=color:#f92672>.</span>right <span style=color:#f92672>=</span> right
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>lca_bst</span>(node:TreeNode, p,q):
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>while</span> node:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> node<span style=color:#f92672>.</span>data <span style=color:#f92672>&gt;</span> q <span style=color:#f92672>and</span> node<span style=color:#f92672>.</span>data <span style=color:#f92672>&gt;</span> q:
</span></span><span style=display:flex><span>			node <span style=color:#f92672>=</span> node<span style=color:#f92672>.</span>left <span style=color:#75715e># go left</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>elif</span> node<span style=color:#f92672>.</span>data <span style=color:#f92672>&lt;</span> p <span style=color:#f92672>and</span> node<span style=color:#f92672>.</span>data <span style=color:#f92672>&lt;</span> q:
</span></span><span style=display:flex><span>			node <span style=color:#f92672>=</span> node<span style=color:#f92672>.</span>right <span style=color:#75715e># go right</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>return</span> node <span style=color:#75715e># there is a guranteed split hence current node is the LCA</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>None</span> <span style=color:#75715e># this becomes the base case if the tree is empty	</span>
</span></span></code></pre></div></div></article></div></main><footer><p>&copy; 2025 Deepanshu Kandpal</p></footer><a id=scrollTopBtn title="Go to top"><i class="fa-solid fa-arrow-up"></i></a>
<script src=/js/search.js></script><script>var mybutton=document.getElementById("scrollTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.classList.add("show"):mybutton.classList.remove("show")}mybutton.onclick=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script>document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll("code.language-mermaid");e.forEach(function(e,t){const n=document.createElement("div");n.className="mermaid",n.textContent=e.textContent,n.id="mermaid-"+t,e.parentNode.parentNode.replaceChild(n,e.parentNode)}),mermaid.initialize({startOnLoad:!0,theme:"default",themeVariables:{primaryColor:"#4a90e2",primaryTextColor:"#333",primaryBorderColor:"#4a90e2",lineColor:"#333"}}),mermaid.init()})</script></body></html>