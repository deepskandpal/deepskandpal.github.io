<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>404EngineerNotFound</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.31/dist/flexsearch.bundle.js></script><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script></head><body>\<header><nav><div class=logo><a href=/>404EngineerNotFound</a></div><ul class=main-nav><li class="nav-item has-dropdown"><a href=#>Writings <i class="fas fa-caret-down fa-xs"></i></a><ul class=dropdown-menu><li class=dropdown-item><a href=/stories/>Stories</a></li><li class=dropdown-item><a href=/thoughts/>Thoughts</a></li><li class=dropdown-item><a href=/fitness-log/>Fitness Log</a></li></ul></li><li class="nav-item has-dropdown"><a href=#>Tech Lab <i class="fas fa-caret-down fa-xs"></i></a><ul class=dropdown-menu><li class=dropdown-item><a href=/papershelf/>Papershelf</a></li><li class=dropdown-item><a href=/creations/>Creations</a></li><li class=dropdown-item><a href=/dsa-log/>DSA Log</a></li><li class=dropdown-item><a href=/tech-writings/>Technical Writings</a></li></ul></li><li class=nav-item><a href=/bookshelf/>Bookshelf</a></li><li class=nav-item><a href=/about/>About</a></li></ul><div class=search-container><input type=search id=search-input placeholder=Search...>
<i class="fa fa-search"></i></div></nav><div id=search-results-container><ul id=search-results></ul></div></header><main><div class=single-content-wrapper><aside class=article-sidebar><nav><h4>On this page</h4><nav id=TableOfContents></nav></nav></aside><article class=dsa-single><h1></h1><div class=dsa-meta><p><strong>Difficulty:</strong> <span class=difficulty->N/A</span> |
<strong>Solved:</strong> January 1, 0001</p></div><div class=dsa-content><p>[[Binary trees and Binary search trees]]</p><h1 id=problem>Problem</h1><p>Given a binary tree, determine if it isÂ <strong>height-balanced</strong>.</p><h1 id=brainstorming>Brainstorming</h1><p>what is a balanced tree? its a tree where the height of its left child and right child is at most 1 . When you are at a node you would need the left tree height and the right tree height , we can check the difference between them if its more than 1 then we can return False. Once the traversal ends and we don&rsquo;t short the traversal even once then we can safely return True.</p><ol><li>initialise a function <code>get_height(node)</code> which takes in a node</li><li>for each <code>node</code> we pass <code>get_height(node.left)</code> and <code>get_height(node.right)</code> for its left and right nodes (post order traversal)</li><li>Once we have <code>left_height</code> and the <code>right_height</code> then we can subtract and check the difference if the difference <code>abs(left_height - right_height)</code> is > 1 then we can return false</li><li>If at the end of the recursive helper we don&rsquo;t exit early then the main function will return by default <code>True</code></li></ol><p>This brute force algo will work well but the problem is it will do a lot of repeat calculations for subtrees as we will go down in the traversal. This is a bit inefficient . But we are doing it because the node at this point does not know if the left tree or the right tree is balanced or not we only get the height, so we end up calculating the subtree height multiple times.</p><p>The best way to solve it is if instead of just returning the height we also return a flag that tells if below the current level tree is balanced or not. It solves 2 problems . One we don&rsquo;t need to calculate the subtree height again and again since the flag will tell us if the tree is balanced or not. If its balanced then we can calculate at the current node the height and decide <em>only</em> for the current node level. If they are not balanced then anyway we don&rsquo;t have to worry about calculating the heights at all and just return false ,</p><p>Below is the updated algorithm</p><ol><li>initialise the recursive helper with a new parameter <code>get_height(node)</code> that returns <code>is_balanced</code> and <code>height</code></li><li>the base case would be if we have hit an empty tree then the returning value would be <code>False</code> and the height would be <code>-1</code></li><li>now we will first ask the left and the right subtrees for the status and height <code>is_left_balanced, left_height = get_height(node.left)</code> and <code>is_right_balanced, right_height = get_height(node.right)</code></li><li>check for the flags <code>is_left_balanced</code> and <code>is_right_balanced</code> if they are false then there is no need to calculate the height at the current level and just return <code>False, -1</code></li><li>if they both are balanced then we will caculate the height difference between <code>left_height</code> and <code>right_height</code> if its greater than <code>1</code> then we will return <code>False and -1</code></li><li>if its less than equal to 1 then we return <code>True and max(left_height, right_height) + 1</code></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TreeNode</span>: 
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self, val<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>, left<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>, right<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>): 
</span></span><span style=display:flex><span>		self<span style=color:#f92672>.</span>val <span style=color:#f92672>=</span> val 
</span></span><span style=display:flex><span>		self<span style=color:#f92672>.</span>left <span style=color:#f92672>=</span> left 
</span></span><span style=display:flex><span>		self<span style=color:#f92672>.</span>right <span style=color:#f92672>=</span> right
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>is_height_balanced</span>(node:TreeNode):
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> node <span style=color:#f92672>is</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	is_left_balanced, left_height <span style=color:#f92672>=</span> is_height_balanced(node<span style=color:#f92672>.</span>left)
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> is_left_balanced:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>False</span> , <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>	is_right_balanced, right_height <span style=color:#f92672>=</span> is_height_balanced(node<span style=color:#f92672>.</span>right)
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> is_right_balanced:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>False</span> , <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>	
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	height_diff <span style=color:#f92672>=</span> abs(left_height <span style=color:#f92672>-</span> right_height)
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> height_diff <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span>:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>False</span> , <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span> , max(left_height, right_height) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span> 
</span></span><span style=display:flex><span>		
</span></span></code></pre></div><h1 id=key-take-aways>Key take aways</h1><p>an empty tree is by definition balanced hence it will return <code>True</code></p></div></article></div></main><footer><p>&copy; 2025 Deepanshu Kandpal</p></footer><a id=scrollTopBtn title="Go to top"><i class="fa-solid fa-arrow-up"></i></a>
<script src=/js/search.js></script><script>var mybutton=document.getElementById("scrollTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.classList.add("show"):mybutton.classList.remove("show")}mybutton.onclick=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script>document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll("code.language-mermaid");e.forEach(function(e,t){const n=document.createElement("div");n.className="mermaid",n.textContent=e.textContent,n.id="mermaid-"+t,e.parentNode.parentNode.replaceChild(n,e.parentNode)}),mermaid.initialize({startOnLoad:!0,theme:"default",themeVariables:{primaryColor:"#4a90e2",primaryTextColor:"#333",primaryBorderColor:"#4a90e2",lineColor:"#333"}}),mermaid.init()})</script></body></html>